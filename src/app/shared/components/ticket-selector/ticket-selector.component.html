<div class="border border-gray-200 rounded-lg p-4 hover:border-blue-500 transition-colors">
  <div class="flex justify-between items-start mb-3">
    <div class="flex-1">
      <h3 class="font-semibold text-gray-900 mb-1">{{ ticket.name }}</h3>
      <span [class]="'inline-block px-2 py-1 rounded text-xs font-medium ' + getCategoryColor(ticket.category)">
        {{ getCategoryLabel(ticket.category) }}
      </span>
    </div>
    <div class="text-right">
      <p class="text-2xl font-bold text-gray-900">
        {{ ticket.price === 0 ? 'Gratuit' : ticket.price + '€' }}
      </p>
    </div>
  </div>

  @if (ticket.description) {
    <p class="text-sm text-gray-600 mb-3">{{ ticket.description }}</p>
  }

  <div class="flex items-center justify-between mb-3">
    <div class="text-sm">
      <span class="text-gray-600">Disponible: </span>
      <span class="font-semibold" [class.text-green-600]="(ticket.available || 0) > 10" [class.text-yellow-600]="(ticket.available || 0) <= 10 && (ticket.available || 0) > 0" [class.text-red-600]="(ticket.available || 0) === 0">
        {{ ticket.available || 0 }}
      </span>
    </div>
    @if (ticket.maxPerOrder) {
      <span class="text-xs text-gray-500">Max: {{ ticket.maxPerOrder }}</span>
    }
  </div>

  <!-- Quantity Selector -->
  <div class="flex items-center gap-3">
    <button
      type="button"
      (click)="decrement()"
      [disabled]="!canDecrement()"
      class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-bold text-lg">
      −
    </button>

    <input
      type="number"
      [value]="currentQuantity()"
      (change)="setQuantity(+($any($event.target).value))"
      [min]="ticket.minPerOrder || 0"
      [max]="Math.min(ticket.maxPerOrder || 999, ticket.available || 0)"
      class="w-20 text-center border border-gray-300 rounded-lg py-2 text-lg font-semibold focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    />

    <button
      type="button"
      (click)="increment()"
      [disabled]="!canIncrement()"
      class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-bold text-lg">
      +
    </button>

    @if (currentQuantity() > 0) {
      <div class="flex-1 text-right">
        <span class="text-lg font-bold text-blue-600">
          {{ currentQuantity() * ticket.price }}€
        </span>
      </div>
    }
  </div>

  @if (ticket.minPerOrder && ticket.minPerOrder > 1) {
    <p class="text-xs text-gray-500 mt-2">Minimum {{ ticket.minPerOrder }} billets</p>
  }
</div>

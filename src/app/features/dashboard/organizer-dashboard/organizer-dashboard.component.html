<!-- ðŸŽ¨ ORGANIZER DASHBOARD - THEME: DARK PURPLE -->
<div class="organizer-dashboard">
  <div class="dashboard-container">
    <!-- Header -->
    <div class="dashboard-header">
      <div class="header-content">
        <h1 class="header-title">
          Bienvenue, <span class="gradient-text">{{ user()?.firstName }}</span> ! ðŸŽª
        </h1>
        <p class="header-subtitle">Tableau de bord organisateur</p>
      </div>
    </div>

    @if (loading()) {
      <div class="loading-state">
        <div class="spinner-large"></div>
      </div>
    } @else {
      <!-- Stats Cards -->
      <div class="stats-grid">
        @for (stat of stats(); track stat.label) {
          <div class="stat-card">
            <div class="stat-icon">{{ stat.icon }}</div>
            <div class="stat-content">
              <p class="stat-label">{{ stat.label }}</p>
              <p class="stat-value">{{ stat.value }}</p>
              <p class="stat-detail">{{ stat.detail }}</p>
            </div>
            <div class="stat-border" [style.background]="stat.borderColor"></div>
          </div>
        }
      </div>

      <!-- Quick Actions & Team Management -->
      <div class="content-grid">
        <!-- Quick Actions -->
        <div class="content-card actions-card">
          <div class="card-header">
            <h2 class="card-title">Actions rapides</h2>
          </div>
          <div class="quick-actions">
            <a routerLink="/events/create" class="quick-action action-create">
              <span class="quick-icon">âž•</span>
              <div class="quick-content">
                <span class="quick-title">CrÃ©er un Ã©vÃ©nement</span>
                <span class="quick-desc">Commencer maintenant</span>
              </div>
            </a>

            <a routerLink="/events" class="quick-action action-manage">
              <span class="quick-icon">ðŸ“Š</span>
              <div class="quick-content">
                <span class="quick-title">GÃ©rer mes Ã©vÃ©nements</span>
                <span class="quick-desc">Voir la liste</span>
              </div>
            </a>

            <a routerLink="/staff-management" class="quick-action action-staff">
              <span class="quick-icon">ðŸ‘¥</span>
              <div class="quick-content">
                <span class="quick-title">GÃ©rer mon Ã©quipe</span>
                <span class="quick-desc">Staff et accÃ¨s</span>
              </div>
            </a>

            <!-- âœ… FIX: bouton Statistiques connectÃ© au live dashboard -->
            <button class="quick-action action-stats" (click)="navigateToStats()">
              <span class="quick-icon">ðŸ“ˆ</span>
              <div class="quick-content">
                <span class="quick-title">Statistiques Live</span>
                <span class="quick-desc">Analytics temps rÃ©el</span>
              </div>
            </button>
          </div>
        </div>

        <!-- Team Management -->
        <div class="content-card team-card">
          <div class="card-header">
            <h2 class="card-title">Gestion de l'Ã©quipe</h2>
          </div>
          <div class="team-tip">
            <div class="tip-icon">ðŸ’¡</div>
            <div class="tip-content">
              <p class="tip-title">Astuce</p>
              <p class="tip-text">Vous pouvez promouvoir des participants en membres Staff pour qu'ils puissent scanner les billets.</p>
            </div>
          </div>
          <app-button routerLink="/staff-management" variant="secondary" size="md" [fullWidth]="true">
            GÃ©rer mon Ã©quipe
          </app-button>
        </div>
      </div>

      <!-- Active Events -->
      <div class="content-card events-card">
        <div class="card-header">
          <div class="header-left">
            <h2 class="card-title">Mes Ã©vÃ©nements actifs</h2>
            <p class="card-subtitle">GÃ©rez vos Ã©vÃ©nements en cours</p>
          </div>
          <a routerLink="/events" class="header-link">
            Voir tout â†’
          </a>
        </div>

        @if (recentEvents().length === 0) {
          <div class="empty-state">
            <div class="empty-icon">ðŸŽª</div>
            <p class="empty-title">Aucun Ã©vÃ©nement</p>
            <p class="empty-desc">CrÃ©ez votre premier Ã©vÃ©nement pour commencer Ã  vendre des billets</p>
            <app-button routerLink="/events/create" variant="primary" size="md">
              CrÃ©er mon premier Ã©vÃ©nement
            </app-button>
          </div>
        } @else {
          <div class="events-list">
            @for (event of recentEvents(); track event.id) {
              <div class="event-item" [routerLink]="['/events', event.id]">
                <div class="event-visual"
                     [style.background]="'linear-gradient(135deg, ' + (event.primaryColor || '#BE3DF0') + ', ' + (event.secondaryColor || '#5F1ED9') + ')'">
                  <span class="event-emoji">ðŸŽª</span>
                </div>
                <div class="event-info">
                  <h3 class="event-name">{{ event.name }}</h3>
                  <div class="event-meta">
                    <span class="event-meta-item">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                      </svg>
                      {{ formatDate(event.startDate) }}
                    </span>
                    <span class="event-meta-item">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                      </svg>
                      {{ event.location }}
                    </span>
                  </div>
                </div>
                <div class="event-stats">
                  <p class="stats-label">Billets vendus</p>
                  <p class="stats-value">{{ event.ticketsSold || 0 }}/{{ event.capacity }}</p>
                </div>
                <svg class="event-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
              </div>
            }
          </div>
        }
      </div>
    }
  </div>
</div>
